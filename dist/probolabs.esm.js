const e={INPUT_TEXT:"INPUT_TEXT",TEXTAREA:"TEXTAREA",INPUT_SELECT:"INPUT_SELECT",INPUT_CHECKBOX:"INPUT_CHECKBOX",INPUT_RADIO:"INPUT_RADIO",BUTTON:"BUTTON",LINK:"LINK",TOGGLE_SWITCH:"TOGGLE_SWITCH",NON_INTERACTIVE_ELEMENT:"NON_INTERACTIVE_ELEMENT"},t={execute:async function(t){const l=await async function(t){const l=Array.isArray(t)?t:[t];console.log("ðŸ” Starting element search for types:",l);const i=[];l.forEach((t=>{t!==e.INPUT_TEXT&&t!==e.TEXTAREA||(i.push(...document.querySelectorAll("input")),i.push(...document.querySelectorAll("textarea")),i.push(...document.querySelectorAll('[contenteditable="true"]'))),t===e.INPUT_SELECT&&i.push(...r()),t===e.INPUT_CHECKBOX&&i.push(...document.querySelectorAll('input[type="checkbox"]')),t===e.INPUT_RADIO&&i.push(...document.querySelectorAll('input[type="radio"]')),t!==e.BUTTON&&t!==e.LINK||i.push(...function(){const e=[];e.push(...document.querySelectorAll("a[href]")),e.push(...document.querySelectorAll("button")),e.push(...document.querySelectorAll('input[type="button"], input[type="submit"], input[type="reset"]')),e.push(...document.querySelectorAll('[role="button"]')),e.push(...document.querySelectorAll('[tabindex="0"]')),e.push(...document.querySelectorAll("[onclick]")),e.push(...r());const t=Array.from(document.querySelectorAll('[role="row"]')).filter((e=>/clickable/i.test(e.className)));return e.push(...t),o(e)}()),t===e.LINK&&i.push(...document.querySelectorAll("a")),t===e.TOGGLE_SWITCH&&i.push(...function(){const e=[],t=document.querySelectorAll('input[type="checkbox"]'),n=/switch|toggle|slider/i;return t.forEach((t=>{let o=!1;if((n.test(t.className)||n.test(t.getAttribute("role")||""))&&(o=!0),!o){let e=t;for(let t=0;t<3;t++){const t=e.parentElement;if(!t)break;const r=t.className||"",l=t.getAttribute("role")||"";if(n.test(r)||n.test(l)){o=!0;break}e=t}}if(!o){const e=t.nextElementSibling;if(e){const t=e.className||"",r=e.getAttribute("role")||"";(n.test(t)||n.test(r))&&(o=!0)}}o&&e.push(t)})),o(e)}()),t===e.NON_INTERACTIVE_ELEMENT&&i.push(...Array.from(document.querySelectorAll("*")).filter((e=>{if(!e.firstElementChild){const t=e.tagName.toLowerCase();if(!["select","button","a"].includes(t))return["p","span","div","input","textarea"].includes(t)}return!1})))}));const s=o(i),u=s.map(((e,t)=>n(e,t)));return console.log(`Found ${u.length} elements:`),u.forEach((e=>{console.log(`Element ${e.index}:`,e)})),u}(t);return function(e){console.log("ðŸ” Highlighting elements CHANGED");const t=document.getElementById("highlight-overlay");t&&t.remove();const n=document.createElement("div");n.id="highlight-overlay",n.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    z-index: 10000;\n  ",document.body.appendChild(n);const o=e=>document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,r=()=>{n.innerHTML="",e.forEach((e=>{const t=o(e.xpath);if(!t)return;const r=t.getBoundingClientRect(),l=document.createElement("div");l.style.cssText=`\n        position: fixed;\n        left: ${r.x}px;\n        top: ${r.y}px;\n        width: ${r.width}px;\n        height: ${r.height}px;\n        border: 1px solid rgb(255, 0, 0);\n        transition: all 0.2s ease-in-out;\n      `;const i=document.createElement("div");i.style.cssText="\n        position: absolute;\n        right: -4px;     /* Offset to the right */\n        top: -4px;       /* Offset upwards */\n        padding: 4px;\n        background-color: rgb(255, 255, 0);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      ";const s=document.createElement("span");s.style.cssText="\n        color: rgb(0, 0, 0);\n        font-family: Arial, sans-serif;\n        font-size: 12px;\n        line-height: 1;\n      ",s.textContent=e.index,i.appendChild(s),l.appendChild(i),n.appendChild(l)}))};r();const l=()=>{requestAnimationFrame(r)};window.addEventListener("scroll",l,!0),window.addEventListener("resize",r),n.scrollHandler=l,n.updateHighlights=r}(l),l},unexecute:function(){const e=document.getElementById("highlight-overlay");e&&e.remove()},getElementInfo:n};function n(e,t){const n=e.getBoundingClientRect();return{index:t.toString(),html:e.outerHTML,xpath:(e=>{if(!e)return"";if(e.id)return`//*[@id="${e.id}"]`;const t=[];for(;e&&e.nodeType===Node.ELEMENT_NODE;){let n=e.nodeName.toLowerCase(),o=e,r=0;for(;o=o.previousElementSibling;)o.nodeName.toLowerCase()===n&&r++;r&&(n+=`[${r+1}]`),t.unshift(n),e=e.parentNode}return"/"+t.join("/")})(e),text:e.textContent?.trim()||"",tag:e.tagName.toLowerCase(),type:e.getAttribute("type")||"",css_selector:(e=>{const t=[];for(;e.nodeType===Node.ELEMENT_NODE;){let n=e.nodeName.toLowerCase();if(e.id){n=`#${e.id}`,t.unshift(n);break}{let t=e,o=1;for(;t=t.previousElementSibling;)t.nodeName.toLowerCase()===n&&o++;o>1&&(n+=`:nth-of-type(${o})`)}t.unshift(n),e=e.parentNode}return t.join(" > ")})(e),bounding_box:{x:n.x,y:n.y,width:n.width,height:n.height}}}function o(e,t=!1){const n=e=>{if(!e)return"";if(e.id)return`//*[@id="${e.id}"]`;const t=[];for(;e&&e.nodeType===Node.ELEMENT_NODE;){let n=e.nodeName.toLowerCase(),o=e,r=0;for(;o=o.previousElementSibling;)o.nodeName.toLowerCase()===n&&r++;r&&(n+=`[${r+1}]`),t.unshift(n),e=e.parentNode}return"/"+t.join("/")},o=e.map((e=>({element:e,xpath:n(e),depth:n(e).split("/").length})));if(t){o.sort(((e,t)=>e.depth-t.depth));const e=new Set,t=[];for(const{element:n,xpath:r}of o)Array.from(e).some((e=>r.startsWith(e)))||(e.add(r),t.push(n));return t}{const e=new Set;return o.filter((({xpath:t})=>!e.has(t)&&(e.add(t),!0))).map((({element:e})=>e))}}function r(){const e=[];e.push(...document.querySelectorAll("select")),e.push(...document.querySelectorAll('[role="combobox"], [role="listbox"], [role="dropdown"]'));const t=/dropdown|select|combobox/i,n=document.querySelectorAll("*"),r=Array.from(n).filter((e=>{const n=t.test(e.className),o=["li","ul","span","div","p"].includes(e.tagName.toLowerCase());return n&&o}));return e.push(...r),e.push(...document.querySelectorAll('[aria-haspopup="true"], [aria-haspopup="listbox"]')),e.push(...document.querySelectorAll("nav ul li")),o(e,!0)}"undefined"!=typeof window&&(window.ProboLabs={ElementTag:e,highlight:t});export{e as ElementTag,t as highlight};
//# sourceMappingURL=probolabs.esm.js.map
