!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ProboLabs={})}(this,(function(e){"use strict";const t={CLICKABLE:"CLICKABLE",FILLABLE:"FILLABLE",SELECTABLE:"SELECTABLE",NON_INTERACTIVE_ELEMENT:"NON_INTERACTIVE_ELEMENT"};class n{constructor(e,t,{tag:n,type:o,text:i,html:l,xpath:r,css_selector:s,bounding_box:u}){this.index=t.toString(),this.tag=n,this.type=o,this.text=i,this.html=l,this.xpath=r,this.css_selector=s,this.bounding_box=u,this.element=e}}function o(e){if(!e)return"";if(e.id)return`//*[@id="${e.id}"]`;const t=[];let n=e;for(;n&&n.nodeType===Node.ELEMENT_NODE;){let e=1,o=n.previousSibling;for(;o;)o.nodeType===Node.ELEMENT_NODE&&o.tagName===n.tagName&&e++,o=o.previousSibling;const i=n.tagName.toLowerCase();t.unshift(`${i}[${e}]`),n=n.parentNode}return"/"+t.join("/")}function i(e,t){const i=e.getBoundingClientRect(),l={x:i.x,y:i.y,width:i.width,height:i.height};return new n(e,t,{tag:e.tagName.toLowerCase(),type:e.type||"",text:e.textContent.trim(),html:e.outerHTML,xpath:o(e),css_selector:(e=>{const t=[];for(;e.nodeType===Node.ELEMENT_NODE;){let n=e.nodeName.toLowerCase();if(e.id){n=`#${e.id}`,t.unshift(n);break}{let t=e,o=1;for(;t=t.previousElementSibling;)t.nodeName.toLowerCase()===n&&o++;o>1&&(n+=`:nth-of-type(${o})`)}t.unshift(n),e=e.parentNode}return t.join(" > ")})(e),bounding_box:l})}function l(){const e=[];e.push(...document.querySelectorAll("select")),e.push(...document.querySelectorAll('[role="combobox"], [role="listbox"], [role="dropdown"]'));const t=/.*(dropdown|select|combobox).*/i,n=document.querySelectorAll("*"),o=Array.from(n).filter((e=>{const n=t.test(e.className),o=["li","ul","span","div","p"].includes(e.tagName.toLowerCase());return n&&o}));return e.push(...o),e.push(...document.querySelectorAll('[aria-haspopup="true"], [aria-haspopup="listbox"]')),e.push(...document.querySelectorAll("nav ul li")),e}function r(){const e=[],t=document.querySelectorAll('input[type="checkbox"]'),n=/switch|toggle|slider/i;return t.forEach((t=>{let o=!1;if((n.test(t.className)||n.test(t.getAttribute("role")||""))&&(o=!0),!o){let e=t;for(let t=0;t<3;t++){const t=e.parentElement;if(!t)break;const i=t.className||"",l=t.getAttribute("role")||"";if(n.test(i)||n.test(l)){o=!0;break}e=t}}if(!o){const e=t.nextElementSibling;if(e){const t=e.className||"",i=e.getAttribute("role")||"";(n.test(t)||n.test(i))&&(o=!0)}}o&&e.push(t)})),e}const s={execute:async function(e){const t=await c(e);return d(t),t},unexecute:function(){const e=document.getElementById("highlight-overlay");e&&e.remove()},getElementInfo:i};function u(){const e=document.getElementById("highlight-overlay");e&&e.remove()}async function c(e){const n=Array.isArray(e)?e:[e];console.log("ðŸ” Starting element search for types:",n);const o=[];n.forEach((e=>{if(e===t.FILLABLE){const e=[...document.querySelectorAll('input:not([type="radio"]):not([type="checkbox"])')];console.log("Found inputs:",e.length,e),o.push(...e);const t=[...document.querySelectorAll("textarea")];console.log("Found textareas:",t.length),o.push(...t);const n=[...document.querySelectorAll('[contenteditable="true"]')];console.log("Found editables:",n.length),o.push(...n)}e===t.SELECTABLE&&o.push(...l()),e===t.CLICKABLE&&(o.push(...function(){const e=[],t=[...document.querySelectorAll("a[href]")],n=[...document.querySelectorAll("button")],o=[...document.querySelectorAll('input[type="button"], input[type="submit"], input[type="reset"]')],i=[...document.querySelectorAll('[role="button"]')],s=[...document.querySelectorAll('[tabindex="0"]')],u=[...document.querySelectorAll("[onclick]")],c=l(),d=[...document.querySelectorAll('input[type="checkbox"]')],a=[...document.querySelectorAll('input[type="radio"]')],h=r();return e.push(...t,...n,...o,...i,...s,...u,...c,...d,...a,...h),e}()),o.push(...r()),o.push(...document.querySelectorAll('input[type="checkbox"]')),o.push(...document.querySelectorAll('input[type="radio"]'))),e===t.NON_INTERACTIVE_ELEMENT&&o.push(...Array.from(document.querySelectorAll("*")).filter((e=>{if(!e.firstElementChild){const t=e.tagName.toLowerCase();if(!["select","button","a"].includes(t))return["p","span","div","input","textarea"].includes(t)}return!1})))}));const s=function(e){const t=new Set,n=[];return e.sort(((e,t)=>e.xpath.length-t.xpath.length)),e.forEach((e=>{(function(e,t){for(const n of e)if(t.startsWith(n)&&t!==n)return!0;return!1})(t,e.xpath)&&!function(e){if("menuitem"===e.getAttribute("role"))return!0;if(e.matches([".dropdown > summary",".dropdown-menu > li > a",".dropdown-content li > a","ul.menu li > a",".menu-list li > a"].join(",")))return!0;const t=e.className;return!!["dropdown-item","menu-item","dropdown-link"].some((e=>t.includes(e)))||!(!e.closest(".dropdown, .menu, .dropdown-menu")||"a"!==e.tagName.toLowerCase())}(e.element)||(t.add(e.xpath),n.push(e))})),n.filter(((e,t)=>!n.find(((n,o)=>{if(t===o)return!1;const i=e.bounding_box,l=n.bounding_box;return i.x===l.x&&i.y===l.y&&i.width===l.width&&i.height===l.height&&e.text===n.text&&"a"===n.tag}))||"a"===e.tag))}(o.map(((e,t)=>i(e,t))));return console.log(`Found ${s.length} elements:`),s.forEach((e=>{console.log(`Element ${e.index}:`,e)})),s}function d(e){let t=document.getElementById("highlight-overlay");t||(t=document.createElement("div"),t.id="highlight-overlay",t.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      z-index: 10000;\n    ",document.body.appendChild(t));const n=()=>{t.innerHTML="",e.forEach((e=>{const n=(e=>{const t=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;return t||console.warn("Failed to find element with xpath:",e),t})(e.xpath);if(!n)return;const o=n.getBoundingClientRect();if(0===o.width||0===o.height)return void console.warn("Element has zero dimensions:",e);const i=document.createElement("div");i.style.cssText=`\n        position: fixed;\n        left: ${o.x}px;\n        top: ${o.y}px;\n        width: ${o.width}px;\n        height: ${o.height}px;\n        border: 1px solid rgb(255, 0, 0);\n        transition: all 0.2s ease-in-out;\n      `;const l=document.createElement("div");l.style.cssText="\n        position: absolute;\n        right: -4px;     /* Offset to the right */\n        top: -4px;       /* Offset upwards */\n        padding: 4px;\n        background-color: rgb(255, 255, 0);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      ";const r=document.createElement("span");r.style.cssText="\n        color: rgb(0, 0, 0);\n        font-family: Arial, sans-serif;\n        font-size: 12px;\n        line-height: 1;\n      ",r.textContent=e.index,l.appendChild(r),i.appendChild(l),t.appendChild(i)}))};n();const o=()=>{requestAnimationFrame(n)};window.addEventListener("scroll",o,!0),window.addEventListener("resize",n),t.scrollHandler=o,t.updateHighlights=n}"undefined"!=typeof window&&(window.ProboLabs={ElementTag:t,highlight:s,unhighlightElements:u,findElements:c,highlightElements:d}),e.findElements=c,e.highlight=s,e.highlightElements=d,e.unhighlightElements=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=probolabs.umd.js.map
